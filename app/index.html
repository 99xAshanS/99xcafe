<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>99X Cafe - Management POS</title>

  <!-- Tailwind CSS (CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

  <style>
    /******************************************
     * Futuristic / glass styles
     *****************************************/
    body {
      background: #0f172a;
      color: #e2e8f0;
      font-family: 'Inter', sans-serif;
      min-height: 100vh;
      background-image:
        radial-gradient(circle at 15% 15%, rgba(120,80,210,0.1) 0%, transparent 25%),
        radial-gradient(circle at 85% 85%, rgba(40,120,200,0.1) 0%, transparent 25%);
    }
    .glass {
      background: rgba(15,23,42,0.6);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 1rem;
    }
    .neo-gradient {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    .hover-translate {
      transition: transform 0.3s;
    }
    .hover-translate:hover {
      transform: translateY(-4px);
    }
    .card-overlay {
      position: relative;
      overflow: hidden;
    }
    .card-overlay::before {
      content: "";
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.03) 0%, transparent 65%);
      opacity: 0;
      transition: opacity 0.5s;
      pointer-events: none;
      z-index: 0;
    }
    .card-overlay:hover::before {
      opacity: 1;
    }
    .float-label {
      position: relative;
    }
    .float-label input,
    .float-label select {
      background: rgba(15,23,42,0.5);
      border-color: rgba(75,85,99,0.5);
      color: #e2e8f0;
      border-radius: 0.5rem;
      padding-top: 1.25rem;
      padding-bottom: 0.5rem;
      transition: border-color 0.3s, box-shadow 0.3s;
    }
    .float-label label {
      position: absolute;
      left: 0.85rem;
      top: 0.5rem;
      font-size: 0.7rem;
      opacity: 0.6;
      pointer-events: none;
    }
    .dashboard-card {
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .dashboard-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 25px -5px rgba(0,0,0,0.3);
    }
    .status-available {
      color: #10b981; /* green */
    }
    .status-reserved {
      color: #f59e0b; /* yellow */
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="glass fixed w-full z-50 px-6 py-4">
    <div class="container mx-auto flex justify-between items-center">
      <div class="font-bold text-2xl bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600">
        99X Cafe
      </div>
      <div class="hidden md:flex space-x-6">
        <button onclick="showSection('dashboard')" class="text-gray-300 hover:text-white">Dashboard</button>
        <button onclick="showSection('categoriesSection')" class="text-gray-300 hover:text-white">Categories</button>
        <button onclick="showSection('itemsSection')" class="text-gray-300 hover:text-white">Items</button>
        <button onclick="showSection('seatsSection')" class="text-gray-300 hover:text-white">Seats</button>
        <button onclick="showSection('cashiersSection')" class="text-gray-300 hover:text-white">Cashiers</button>
        <button onclick="showSection('bookingsSection')" class="text-gray-300 hover:text-white">Bookings</button>
        <button onclick="showSection('ordersSection')" class="text-gray-300 hover:text-white">Orders</button>
      </div>
      <div class="md:hidden">
        <button id="mobileMenuBtn" class="text-white">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
               viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- Mobile menu -->
  <div id="mobileMenu" class="hidden fixed z-40 inset-0 bg-gray-900/95 pt-20">
    <div class="flex flex-col items-center space-y-6 py-8">
      <button onclick="showSection('dashboard'); closeMobileMenu()" class="text-xl text-gray-300 hover:text-white">Dashboard</button>
      <button onclick="showSection('categoriesSection'); closeMobileMenu()" class="text-xl text-gray-300 hover:text-white">Categories</button>
      <button onclick="showSection('itemsSection'); closeMobileMenu()" class="text-xl text-gray-300 hover:text-white">Items</button>
      <button onclick="showSection('seatsSection'); closeMobileMenu()" class="text-xl text-gray-300 hover:text-white">Seats</button>
      <button onclick="showSection('cashiersSection'); closeMobileMenu()" class="text-xl text-gray-300 hover:text-white">Cashiers</button>
      <button onclick="showSection('bookingsSection'); closeMobileMenu()" class="text-xl text-gray-300 hover:text-white">Bookings</button>
      <button onclick="showSection('ordersSection'); closeMobileMenu()" class="text-xl text-gray-300 hover:text-white">Orders</button>
    </div>
  </div>

  <!-- Main container -->
  <div class="container mx-auto pt-24 px-4 pb-16">
    <!-- Dashboard -->
    <section id="dashboard">
      <h1 class="text-3xl font-bold mb-8 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600">
        Cafe Management Dashboard
      </h1>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="glass p-6 rounded-xl hover-translate card-overlay dashboard-card">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-semibold">Categories</h2>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-400" fill="none"
                 viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M19 11H5m14
                       0a2 2 0 012
                       2v6a2 2 0
                       01-2 2H5a2
                       2 0 01-2-2v-6a2
                       2 0
                       012-2m14
                       0V9a2 2 0
                       00-2-2M5
                       11V9a2 2 0
                       012-2m0
                       0V5a2 2 0
                       012-2h6a2
                       2 0 012 2v2M7
                       7h10"/>
            </svg>
          </div>
          <div class="text-3xl font-bold text-blue-400" id="dashboardCategoriesCount">0</div>
          <div class="mt-4">
            <button onclick="showSection('categoriesSection')"
                    class="neo-gradient text-white px-6 py-2 rounded-full hover:opacity-90
                           transition-all duration-300 hover-translate text-sm">
              Manage Categories
            </button>
          </div>
        </div>
        <div class="glass p-6 rounded-xl hover-translate card-overlay dashboard-card">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-semibold">Menu Items</h2>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-purple-400" fill="none"
                 viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12
                       6.253v13m0-13C10.832
                       5.477 9.246 5
                       7.5 5S4.168
                       5.477 3
                       6.253v13C4.168
                       18.477 5.754
                       18 7.5
                       18s3.332.477
                       4.5
                       1.253m0-13C13.168
                       5.477 14.754
                       5
                       16.5
                       5c1.747
                       0
                       3.332.477
                       4.5
                       1.253v13C19.832
                       18.477
                       18.247
                       18
                       16.5
                       18c-1.746
                       0-3.332.477-4.5
                       1.253"/>
            </svg>
          </div>
          <div class="text-3xl font-bold text-purple-400" id="dashboardItemsCount">0</div>
          <div class="mt-4">
            <button onclick="showSection('itemsSection')"
                    class="neo-gradient text-white px-6 py-2 rounded-full hover:opacity-90
                           transition-all duration-300 hover-translate text-sm">
              Manage Items
            </button>
          </div>
        </div>
        <div class="glass p-6 rounded-xl hover-translate card-overlay dashboard-card">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-semibold">Cafe Seats</h2>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-400" fill="none"
                 viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 4.354a4
                       4 0
                       110
                       5.292M15
                       21H3v-1a6
                       6 0
                       0112
                       0v1zm0
                       0h6v-1a6
                       6 0
                       00-9-5.197M13
                       7a4 4 0
                       11-8 0
                       4 4
                       0
                       018 0z"/>
            </svg>
          </div>
          <div class="text-3xl font-bold text-indigo-400" id="dashboardSeatsCount">0</div>
          <div class="mt-4">
            <button onclick="showSection('seatsSection')"
                    class="neo-gradient text-white px-6 py-2 rounded-full hover:opacity-90
                           transition-all duration-300 hover-translate text-sm">
              Manage Seats
            </button>
          </div>
        </div>
      </div>
      <div class="glass rounded-xl p-6 my-8 hover-translate card-overlay">
        <h2 class="text-2xl font-semibold mb-4">Quick Actions</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <button onclick="showSection('ordersSection')"
                  class="bg-gray-800/50 hover:bg-gray-700/50 text-white p-4 rounded-lg
                         flex flex-col items-center transition-all duration-300">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mb-2 text-green-400" fill="none"
                 viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M3 3h2l.4
                       2M7
                       13h10l4-8H5.4M7
                       13L5.4
                       5M7
                       13l-2.293
                       2.293c-.63.63-.184
                       1.707.707
                       1.707H17m0
                       0a2
                       2 0
                       100 4 2 2 0
                       000-4zm-8
                       2a2 2
                       0
                       11-4 0 2 2
                       0
                       014
                       0z"/>
            </svg>
            New Order
          </button>
          <button onclick="showSection('bookingsSection')"
                  class="bg-gray-800/50 hover:bg-gray-700/50 text-white p-4 rounded-lg
                         flex flex-col items-center transition-all duration-300">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mb-2 text-yellow-400" fill="none"
                 viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M8
                       7V3m8
                       4V3m-9
                       8h10M5
                       21h14a2
                       2 0
                       002-2V7a2
                       2 0
                       00-2-2H5a2
                       2 0
                       00-2
                       2v12a2
                       2 0
                       002
                       2z"/>
            </svg>
            New Booking
          </button>
          <button onclick="showSection('itemsSection')"
                  class="bg-gray-800/50 hover:bg-gray-700/50 text-white p-4 rounded-lg
                         flex flex-col items-center transition-all duration-300">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mb-2 text-red-400" fill="none"
                 viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12
                       9v3m0
                       0v3m0-3h3m-3
                       0H9m12
                       0a9 9 0
                       11-18
                       0
                       9 9 0
                       0118
                       0z"/>
            </svg>
            Add Item
          </button>
          <button onclick="showSection('cashiersSection')"
                  class="bg-gray-800/50 hover:bg-gray-700/50 text-white p-4 rounded-lg
                         flex flex-col items-center transition-all duration-300">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mb-2 text-blue-400" fill="none"
                 viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M17
                       9V7a2
                       2
                       0
                       00-2-2H5a2
                       2 0
                       00-2
                       2v6a2
                       2 0
                       002
                       2h2m2
                       4h10a2
                       2 0
                       002-2v-6a2
                       2
                       0
                       00-2-2H9a2
                       2 0
                       00-2
                       2v6a2
                       2
                       0
                       002
                       2zm7-5a2
                       2
                       0
                       11-4
                       0 2
                       2
                       0
                       014
                       0z"/>
            </svg>
            Manage Staff
          </button>
        </div>
      </div>
    </section>
    <!-- End Dashboard -->

    <!-- Categories Section -->
    <section id="categoriesSection" class="hidden">
      <h1 class="text-3xl font-bold mb-8 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600">
        Food Categories
      </h1>
      <div class="glass p-6 rounded-xl mb-6 hover-translate card-overlay">
        <form id="categoryForm" class="flex flex-col md:flex-row items-center gap-4">
          <div class="float-label flex-1 w-full">
            <label for="categoryName">Category Name</label>
            <input type="text" id="categoryName"
                   placeholder="e.g. Beverages, Desserts..."
                   class="w-full px-4 py-3" required />
          </div>
          <button class="neo-gradient text-white px-6 py-3 rounded-full hover:opacity-90
                         transition-all duration-300 hover-translate whitespace-nowrap">
            Add/Update Category
          </button>
        </form>
      </div>
      <div class="glass rounded-xl overflow-hidden">
        <table class="w-full">
          <thead class="neo-gradient text-white">
            <tr>
              <th class="px-6 py-4 text-left">#</th>
              <th class="px-6 py-4 text-left">Category Name</th>
              <th class="px-6 py-4 text-left">Actions</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-700" id="categoriesTable"></tbody>
        </table>
      </div>
    </section>
    <!-- End Categories Section -->

    <!-- Items Section -->
    <section id="itemsSection" class="hidden">
      <h1 class="text-3xl font-bold mb-8 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600">
        Food Items
      </h1>
      <div class="glass p-6 rounded-xl mb-6 hover-translate card-overlay">
        <form id="itemForm" class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div class="float-label">
            <label for="itemName">Item Name</label>
            <input type="text" id="itemName" placeholder="Enter item name"
                   class="w-full px-4 py-3" required />
          </div>
          <div class="float-label">
            <label for="itemPrice">Price ($)</label>
            <input type="number" id="itemPrice" placeholder="0.00" step="0.01" min="0"
                   class="w-full px-4 py-3" required />
          </div>
          <div class="float-label">
            <label for="itemCategory">Category</label>
            <select id="itemCategory" class="w-full px-4 py-3" required>
              <option value="">Select Category</option>
            </select>
          </div>
          <button class="neo-gradient text-white px-6 py-3 rounded-full hover:opacity-90 transition-all
                         duration-300 hover-translate self-end">
            Add/Update Item
          </button>
        </form>
      </div>
      <div class="glass rounded-xl overflow-hidden">
        <table class="w-full">
          <thead class="neo-gradient text-white">
            <tr>
              <th class="px-6 py-4 text-left">#</th>
              <th class="px-6 py-4 text-left">Item Name</th>
              <th class="px-6 py-4 text-left">Price</th>
              <th class="px-6 py-4 text-left">Category</th>
              <th class="px-6 py-4 text-left">Actions</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-700" id="itemsTable"></tbody>
        </table>
      </div>
    </section>
    <!-- End Items Section -->

    <!-- Seats Section -->
    <section id="seatsSection" class="hidden">
      <h1 class="text-3xl font-bold mb-8 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600">
        Seats
      </h1>
      <div class="glass p-6 rounded-xl mb-6 hover-translate card-overlay">
        <form id="seatForm" class="flex flex-col md:flex-row items-center gap-4">
          <div class="float-label flex-1 w-full">
            <label for="seatName">Seat Name/Number</label>
            <input type="text" id="seatName"
                   placeholder="e.g. Table 1, Booth A..."
                   class="w-full px-4 py-3" required />
          </div>
          <button class="neo-gradient text-white px-6 py-3 rounded-full hover:opacity-90 transition-all
                         duration-300 hover-translate whitespace-nowrap">
            Add/Update Seat
          </button>
        </form>
      </div>
      <div class="glass rounded-xl overflow-hidden">
        <table class="w-full">
          <thead class="neo-gradient text-white">
            <tr>
              <th class="px-6 py-4 text-left">#</th>
              <th class="px-6 py-4 text-left">Seat</th>
              <th class="px-6 py-4 text-left">Status</th>
              <th class="px-6 py-4 text-left">Actions</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-700" id="seatsTable"></tbody>
        </table>
      </div>
    </section>
    <!-- End Seats Section -->

    <!-- Cashiers Section -->
    <section id="cashiersSection" class="hidden">
      <h1 class="text-3xl font-bold mb-8 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600">
        Cashiers
      </h1>
      <div class="glass p-6 rounded-xl mb-6 hover-translate card-overlay">
        <form id="cashierForm" class="flex flex-col md:flex-row items-center gap-4">
          <div class="float-label flex-1 w-full">
            <label for="cashierName">Cashier Name</label>
            <input type="text" id="cashierName"
                   placeholder="Enter staff name"
                   class="w-full px-4 py-3" required />
          </div>
          <button class="neo-gradient text-white px-6 py-3 rounded-full hover:opacity-90 transition-all
                         duration-300 hover-translate whitespace-nowrap">
            Add/Update Cashier
          </button>
        </form>
      </div>
      <div class="glass rounded-xl overflow-hidden">
        <table class="w-full">
          <thead class="neo-gradient text-white">
            <tr>
              <th class="px-6 py-4 text-left">#</th>
              <th class="px-6 py-4 text-left">Cashier Name</th>
              <th class="px-6 py-4 text-left">Actions</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-700" id="cashiersTable"></tbody>
        </table>
      </div>
    </section>
    <!-- End Cashiers Section -->

    <!-- Bookings Section -->
    <section id="bookingsSection" class="hidden">
      <h1 class="text-3xl font-bold mb-8 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600">
        Event Bookings
      </h1>
      <div class="glass p-6 rounded-xl mb-6 hover-translate card-overlay">
        <form id="bookingForm" class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="float-label">
            <label for="bookingName">Booking Name/Description</label>
            <input type="text" id="bookingName" placeholder="Enter event details"
                   class="w-full px-4 py-3" required />
          </div>
          <div class="float-label">
            <label for="bookingDate">Event Date</label>
            <input type="date" id="bookingDate"
                   class="w-full px-4 py-3" required />
          </div>
          <div class="float-label">
            <label for="bookingSeatsNeeded">Number of Seats</label>
            <input type="number" id="bookingSeatsNeeded"
                   placeholder="How many seats needed?"
                   class="w-full px-4 py-3" min="1" required />
          </div>
          <div class="md:col-span-3">
            <button class="neo-gradient text-white px-6 py-3 rounded-full hover:opacity-90
                           transition-all duration-300 hover-translate glow-effect w-full md:w-auto">
              Add/Update Booking
            </button>
          </div>
        </form>
      </div>
      <div class="glass rounded-xl overflow-hidden">
        <table class="w-full">
          <thead class="neo-gradient text-white">
            <tr>
              <th class="px-6 py-4 text-left">#</th>
              <th class="px-6 py-4 text-left">Booking Name</th>
              <th class="px-6 py-4 text-left">Date</th>
              <th class="px-6 py-4 text-left">Seats Needed</th>
              <th class="px-6 py-4 text-left">Actions</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-700" id="bookingsTable"></tbody>
        </table>
      </div>
    </section>
    <!-- End Bookings Section -->

    <!-- Orders Section -->
    <section id="ordersSection" class="hidden">
      <h1 class="text-3xl font-bold mb-8 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600">
        Order Management
      </h1>

      <!-- Build an order in memory -->
      <div class="glass p-6 rounded-xl mb-6 hover-translate card-overlay">
        <form id="orderLineForm" class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
          <div class="float-label">
            <label for="orderItemSelect">Select Item</label>
            <select id="orderItemSelect" class="w-full px-4 py-3">
              <option value="">Choose Item</option>
            </select>
          </div>
          <div class="float-label">
            <label for="orderQuantity">Quantity</label>
            <input type="number" id="orderQuantity" class="w-full px-4 py-3"
                   placeholder="1" min="1" value="1"/>
          </div>
          <button type="submit"
                  class="neo-gradient text-white px-4 py-3 rounded-full hover:opacity-90
                         transition-all duration-300 hover-translate">
            Add Line
          </button>
        </form>

        <div class="mt-4 glass p-4 rounded-md">
          <h3 class="text-xl font-semibold mb-2">Current Order Lines</h3>
          <table class="w-full">
            <thead>
              <tr class="text-gray-300 border-b border-gray-700">
                <th class="py-2 text-left">Item</th>
                <th class="py-2 text-left">Price</th>
                <th class="py-2 text-left">Qty</th>
                <th class="py-2 text-left">Subtotal</th>
                <th class="py-2 text-left">Action</th>
              </tr>
            </thead>
            <tbody id="orderLinesTable" class="divide-y divide-gray-700"></tbody>
          </table>
          <div class="mt-4 flex justify-between">
            <div class="float-label w-1/2 md:w-1/3">
              <label for="orderSeatSelect">Seat (Optional)</label>
              <select id="orderSeatSelect" class="w-full px-4 py-3">
                <option value="">No seat assigned</option>
              </select>
            </div>
            <p class="text-lg font-bold self-center">Total: 
              <span id="orderInProgressTotal" class="text-blue-400">$0.00</span>
            </p>
          </div>
          <div class="mt-4">
            <button id="submitOrderBtn"
                    class="neo-gradient text-white px-6 py-3 rounded-full hover:opacity-90
                           transition-all duration-300 hover-translate font-bold">
              Submit Order
            </button>
          </div>
        </div>
      </div>

      <!-- Existing orders list -->
      <div class="glass p-6 rounded-xl hover-translate card-overlay">
        <h3 class="text-2xl font-semibold mb-4">Existing Orders</h3>
        <table class="w-full">
          <thead class="neo-gradient text-white">
            <tr>
              <th class="px-6 py-4 text-left">Order ID</th>
              <th class="px-6 py-4 text-left">Seat</th>
              <th class="px-6 py-4 text-left">Total</th>
              <th class="px-6 py-4 text-left">Actions</th>
            </tr>
          </thead>
          <tbody id="ordersTable" class="divide-y divide-gray-700"></tbody>
        </table>
      </div>
    </section>
    <!-- End Orders Section -->

  </div> <!-- End container -->

  <script>
    /***************************************************/
    /*** 1) Basic Setup and Show/Hide Sections *********/
    /***************************************************/
    const apiBase = ''; // same-origin relative API calls
    function showSection(sectionId){
      document.querySelectorAll('section').forEach(sec => sec.classList.add('hidden'));
      document.getElementById(sectionId).classList.remove('hidden');
      closeMobileMenu();
      if(sectionId==='dashboard') updateDashboard();
    }
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    mobileMenuBtn.addEventListener('click',() => {
      mobileMenu.classList.toggle('hidden');
    });
    function closeMobileMenu() {
      mobileMenu.classList.add('hidden');
    }

    /***************************************************/
    /*** 2) Global Data Arrays *************************/
    /***************************************************/
    let categoriesData = [];
    let itemsData = [];
    let seatsData = [];
    let cashiersData = [];
    let bookingsData = [];
    let ordersData = []; // for listing existing orders

    /***************************************************/
    /*** 3) Dashboard **********************************/
    /***************************************************/
    function updateDashboard(){
      document.getElementById('dashboardCategoriesCount').textContent = categoriesData.length;
      document.getElementById('dashboardItemsCount').textContent = itemsData.length;
      document.getElementById('dashboardSeatsCount').textContent = seatsData.length;
    }

    /***************************************************/
    /*** 4) Categories *********************************/
    /***************************************************/
    let editCategoryId=null;
    async function refreshCategories(){
      const res=await fetch(apiBase+'/api/categories');
      categoriesData=await res.json();
      renderCategoriesTable();
      renderCategoryOptions();
    }
    function renderCategoriesTable(){
      const tb=document.getElementById('categoriesTable');
      tb.innerHTML='';
      categoriesData.forEach((cat,idx)=>{
        const tr=document.createElement('tr');
        tr.className='border-b border-gray-700 hover:bg-gray-800/30 transition-colors';
        tr.innerHTML=`
          <td class="px-6 py-4">${idx+1}</td>
          <td class="px-6 py-4">${cat.name}</td>
          <td class="px-6 py-4 flex space-x-2">
            <button class="text-blue-400 hover:text-blue-300" onclick="editCategory(${cat.id},'${cat.name}')">Edit</button>
            <button class="text-red-400 hover:text-red-300" onclick="deleteCategory(${cat.id})">Delete</button>
          </td>
        `;
        tb.appendChild(tr);
      });
    }
    function renderCategoryOptions(){
      const sel=document.getElementById('itemCategory');
      sel.innerHTML='<option value="">Select Category</option>';
      categoriesData.forEach(cat=>{
        const op=document.createElement('option');
        op.value=cat.id;
        op.textContent=cat.name;
        sel.appendChild(op);
      });
    }
    function editCategory(id,name){
      editCategoryId=id;
      document.getElementById('categoryName').value=name;
      showSection('categoriesSection');
    }
    async function deleteCategory(id){
      if(!confirm('Delete this category?'))return;
      await fetch(apiBase+'/api/categories/'+id,{method:'DELETE'});
      await refreshCategories();
    }
    document.getElementById('categoryForm').addEventListener('submit',async(e)=>{
      e.preventDefault();
      const nameVal=document.getElementById('categoryName').value.trim();
      if(!nameVal)return;

      if(editCategoryId){
        await fetch(apiBase+'/api/categories/'+editCategoryId,{
          method:'PUT',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({name:nameVal})
        });
        editCategoryId=null;
      } else {
        await fetch(apiBase+'/api/categories',{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({name:nameVal})
        });
      }
      document.getElementById('categoryName').value='';
      await refreshCategories();
    });

    /***************************************************/
    /*** 5) Items **************************************/
    /***************************************************/
    let editItemId=null;
    async function refreshItems(){
      const res=await fetch(apiBase+'/api/items');
      itemsData=await res.json();
      renderItemsTable();
    }
    function renderItemsTable(){
      const tb=document.getElementById('itemsTable');
      tb.innerHTML='';
      itemsData.forEach((it,idx)=>{
        const cat=categoriesData.find(c=>c.id===it.categoryId);
        const tr=document.createElement('tr');
        tr.className='border-b border-gray-700 hover:bg-gray-800/30 transition-colors';
        tr.innerHTML=`
          <td class="px-6 py-4">${idx+1}</td>
          <td class="px-6 py-4">${it.name}</td>
          <td class="px-6 py-4 text-blue-400">$${it.price.toFixed(2)}</td>
          <td class="px-6 py-4">${cat?cat.name:'N/A'}</td>
          <td class="px-6 py-4 flex space-x-2">
            <button class="text-blue-400 hover:text-blue-300" onclick="editItem(${it.id})">Edit</button>
            <button class="text-red-400 hover:text-red-300" onclick="deleteItem(${it.id})">Delete</button>
          </td>
        `;
        tb.appendChild(tr);
      });
    }
    function editItem(id){
      const it=itemsData.find(x=>x.id===id);
      if(!it)return;
      editItemId=id;
      document.getElementById('itemName').value=it.name;
      document.getElementById('itemPrice').value=it.price;
      document.getElementById('itemCategory').value=it.categoryId;
      showSection('itemsSection');
    }
    async function deleteItem(id){
      if(!confirm('Delete this item?'))return;
      await fetch(apiBase+'/api/items/'+id,{method:'DELETE'});
      await refreshItems();
    }
    document.getElementById('itemForm').addEventListener('submit',async(e)=>{
      e.preventDefault();
      const nameVal=document.getElementById('itemName').value.trim();
      const priceVal=parseFloat(document.getElementById('itemPrice').value);
      const catVal=parseInt(document.getElementById('itemCategory').value);
      if(!nameVal||isNaN(priceVal)||!catVal)return;

      if(editItemId){
        await fetch(apiBase+'/api/items/'+editItemId,{
          method:'PUT',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({name:nameVal,price:priceVal,categoryId:catVal})
        });
        editItemId=null;
      } else {
        await fetch(apiBase+'/api/items',{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({name:nameVal,price:priceVal,categoryId:catVal})
        });
      }
      document.getElementById('itemName').value='';
      document.getElementById('itemPrice').value='';
      document.getElementById('itemCategory').value='';
      await refreshItems();
    });

    /***************************************************/
    /*** 6) Seats **************************************/
    /***************************************************/
    let editSeatId=null;
    async function refreshSeats(){
      const res=await fetch(apiBase+'/api/seats');
      seatsData=await res.json();
      renderSeatsTable();
    }
    function renderSeatsTable(){
      const tb=document.getElementById('seatsTable');
      tb.innerHTML='';
      seatsData.forEach((s,idx)=>{
        const statusClass=s.isReserved?'status-reserved':'status-available';
        const statusText=s.isReserved?'Reserved':'Available';
        const tr=document.createElement('tr');
        tr.className='border-b border-gray-700 hover:bg-gray-800/30 transition-colors';
        tr.innerHTML=`
          <td class="px-6 py-4">${idx+1}</td>
          <td class="px-6 py-4">${s.name}</td>
          <td class="px-6 py-4 ${statusClass} font-semibold">${statusText}</td>
          <td class="px-6 py-4 flex space-x-2">
            <button class="text-blue-400 hover:text-blue-300" onclick="editSeat(${s.id},'${s.name}')">Edit</button>
            <button class="text-red-400 hover:text-red-300" onclick="deleteSeat(${s.id})">Delete</button>
          </td>
        `;
        tb.appendChild(tr);
      });
    }
    function editSeat(id,name){
      editSeatId=id;
      document.getElementById('seatName').value=name;
      showSection('seatsSection');
    }
    async function deleteSeat(id){
      if(!confirm('Delete this seat?'))return;
      await fetch(apiBase+'/api/seats/'+id,{method:'DELETE'});
      await refreshSeats();
    }
    document.getElementById('seatForm').addEventListener('submit',async(e)=>{
      e.preventDefault();
      const seatVal=document.getElementById('seatName').value.trim();
      if(!seatVal)return;

      if(editSeatId){
        await fetch(apiBase+'/api/seats/'+editSeatId,{
          method:'PUT',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({name:seatVal})
        });
        editSeatId=null;
      } else {
        await fetch(apiBase+'/api/seats',{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({name:seatVal})
        });
      }
      document.getElementById('seatName').value='';
      await refreshSeats();
    });

    /***************************************************/
    /*** 7) Cashiers ***********************************/
    /***************************************************/
    let editCashierId=null;
    async function refreshCashiers(){
      const res=await fetch(apiBase+'/api/cashiers');
      cashiersData=await res.json();
      renderCashiersTable();
    }
    function renderCashiersTable(){
      const tb=document.getElementById('cashiersTable');
      tb.innerHTML='';
      cashiersData.forEach((c,idx)=>{
        const tr=document.createElement('tr');
        tr.className='border-b border-gray-700 hover:bg-gray-800/30 transition-colors';
        tr.innerHTML=`
          <td class="px-6 py-4">${idx+1}</td>
          <td class="px-6 py-4">${c.name}</td>
          <td class="px-6 py-4 flex space-x-2">
            <button class="text-blue-400 hover:text-blue-300" onclick="editCashier(${c.id},'${c.name}')">Edit</button>
            <button class="text-red-400 hover:text-red-300" onclick="deleteCashier(${c.id})">Delete</button>
          </td>
        `;
        tb.appendChild(tr);
      });
    }
    function editCashier(id,name){
      editCashierId=id;
      document.getElementById('cashierName').value=name;
      showSection('cashiersSection');
    }
    async function deleteCashier(id){
      if(!confirm('Delete this cashier?'))return;
      await fetch(apiBase+'/api/cashiers/'+id,{method:'DELETE'});
      await refreshCashiers();
    }
    document.getElementById('cashierForm').addEventListener('submit',async(e)=>{
      e.preventDefault();
      const nameVal=document.getElementById('cashierName').value.trim();
      if(!nameVal)return;

      if(editCashierId){
        await fetch(apiBase+'/api/cashiers/'+editCashierId,{
          method:'PUT',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({name:nameVal})
        });
        editCashierId=null;
      } else {
        await fetch(apiBase+'/api/cashiers',{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({name:nameVal})
        });
      }
      document.getElementById('cashierName').value='';
      await refreshCashiers();
    });

    /***************************************************/
    /*** 8) Bookings ***********************************/
    /***************************************************/
    let editBookingId=null;
    async function refreshBookings(){
      const res=await fetch(apiBase+'/api/bookings');
      bookingsData=await res.json();
      renderBookingsTable();
    }
    function renderBookingsTable(){
      const tb=document.getElementById('bookingsTable');
      tb.innerHTML='';
      bookingsData.forEach((b,idx)=>{
        const tr=document.createElement('tr');
        tr.className='border-b border-gray-700 hover:bg-gray-800/30 transition-colors';
        tr.innerHTML=`
          <td class="px-6 py-4">${idx+1}</td>
          <td class="px-6 py-4">${b.name}</td>
          <td class="px-6 py-4">${b.date}</td>
          <td class="px-6 py-4 text-indigo-400">${b.seatCount}</td>
          <td class="px-6 py-4 flex space-x-2">
            <button class="text-blue-400 hover:text-blue-300" onclick="editBooking(${b.id})">Edit</button>
            <button class="text-red-400 hover:text-red-300" onclick="deleteBooking(${b.id})">Delete</button>
          </td>
        `;
        tb.appendChild(tr);
      });
    }
    function editBooking(id){
      const bk=bookingsData.find(x=>x.id===id);
      if(!bk)return;
      editBookingId=id;
      document.getElementById('bookingName').value=bk.name;
      document.getElementById('bookingDate').value=bk.date;
      document.getElementById('bookingSeatsNeeded').value=bk.seatCount;
      showSection('bookingsSection');
    }
    async function deleteBooking(id){
      if(!confirm('Delete booking?'))return;
      await fetch(apiBase+'/api/bookings/'+id,{method:'DELETE'});
      await refreshBookings();
      await refreshSeats(); // seats may have been freed
    }
    document.getElementById('bookingForm').addEventListener('submit',async(e)=>{
      e.preventDefault();
      const nameVal=document.getElementById('bookingName').value.trim();
      const dateVal=document.getElementById('bookingDate').value;
      const seatsNeeded=parseInt(document.getElementById('bookingSeatsNeeded').value);
      if(!nameVal||!dateVal||!seatsNeeded)return;

      if(editBookingId){
        const resp=await fetch(apiBase+'/api/bookings/'+editBookingId,{
          method:'PUT',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({
            name:nameVal,
            date:dateVal,
            seatCount:seatsNeeded
          })
        });
        if(!resp.ok){
          let err=await resp.json();
          alert(err.error||'Error updating booking');
        }
        editBookingId=null;
      } else {
        const resp=await fetch(apiBase+'/api/bookings',{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({
            name:nameVal,
            date:dateVal,
            seatCount:seatsNeeded
          })
        });
        if(!resp.ok){
          let err=await resp.json();
          alert(err.error||'Error creating booking');
        }
      }
      e.target.reset();
      await refreshBookings();
      await refreshSeats();
    });

    /***************************************************/
    /*** 9) Orders *************************************/
    /***************************************************/
    let currentOrderLines = [];
    let currentOrderSeatId = null;
    let editOrderId = null; // if editing an existing order

    async function refreshOrders(){
      const res=await fetch(apiBase+'/api/orders');
      ordersData=await res.json();
      renderOrdersTable();
    }
    function renderOrdersTable(){
      const tb=document.getElementById('ordersTable');
      tb.innerHTML='';
      ordersData.forEach(order=>{
        const tr=document.createElement('tr');
        tr.className='border-b border-gray-700 hover:bg-gray-800/30 transition-colors';
        tr.innerHTML=`
          <td class="px-6 py-4">${order.id}</td>
          <td class="px-6 py-4">${order.seatId||'No seat'}</td>
          <td class="px-6 py-4 text-blue-400">$${order.total.toFixed(2)}</td>
          <td class="px-6 py-4 flex space-x-2">
            <button class="text-blue-400 hover:text-blue-300" onclick="editExistingOrder(${order.id})">Edit</button>
            <button class="text-red-400 hover:text-red-300" onclick="deleteOrder(${order.id})">Delete</button>
          </td>
        `;
        tb.appendChild(tr);
      });
    }
    async function deleteOrder(id){
      if(!confirm('Delete this order?')) return;
      await fetch(apiBase+'/api/orders/'+id,{method:'DELETE'});
      await refreshOrders();
    }
    function editExistingOrder(orderId){
      const ord=ordersData.find(o=>o.id===orderId);
      if(!ord)return;
      editOrderId=ord.id;
      currentOrderLines = ord.lines.map(ln=>({
        itemId: ln.itemId,
        itemName: ln.itemName,
        price: ln.price,
        quantity: ln.quantity,
        lineTotal: ln.lineTotal
      }));
      currentOrderSeatId=ord.seatId;
      document.getElementById('orderSeatSelect').value=ord.seatId||'';
      renderOrderLinesTable();
      showSection('ordersSection');
    }

    // build lines
    const orderLineForm=document.getElementById('orderLineForm');
    orderLineForm.addEventListener('submit', e=>{
      e.preventDefault();
      const sel=document.getElementById('orderItemSelect');
      const qtyEl=document.getElementById('orderQuantity');
      const itemId=parseInt(sel.value);
      if(!itemId)return;
      const quantity=parseInt(qtyEl.value)||1;
      const item=itemsData.find(x=>x.id===itemId);
      if(!item)return;
      const lineTotal=item.price*quantity;
      currentOrderLines.push({
        itemId:item.id,
        itemName:item.name,
        price:item.price,
        quantity,
        lineTotal
      });
      renderOrderLinesTable();
    });
    function renderOrderLinesTable(){
      const tb=document.getElementById('orderLinesTable');
      tb.innerHTML='';
      let total=0;
      currentOrderLines.forEach((ln,idx)=>{
        total+=ln.lineTotal;
        const tr=document.createElement('tr');
        tr.innerHTML=`
          <td class="py-2">${ln.itemName}</td>
          <td class="py-2">$${ln.price.toFixed(2)}</td>
          <td class="py-2">${ln.quantity}</td>
          <td class="py-2 text-blue-400">$${ln.lineTotal.toFixed(2)}</td>
          <td class="py-2">
            <button class="text-red-400 hover:text-red-300" onclick="removeOrderLine(${idx})">Remove</button>
          </td>
        `;
        tb.appendChild(tr);
      });
      document.getElementById('orderInProgressTotal').textContent = `$${total.toFixed(2)}`;
    }
    function removeOrderLine(idx){
      currentOrderLines.splice(idx,1);
      renderOrderLinesTable();
    }
    document.getElementById('orderSeatSelect').addEventListener('change', e=>{
      currentOrderSeatId = e.target.value ? parseInt(e.target.value): null;
    });
    document.getElementById('submitOrderBtn').addEventListener('click', async()=>{
      if(currentOrderLines.length===0){
        alert('No items in the order!');
        return;
      }
      const linesToSend = currentOrderLines.map(ln=>({
        itemId: ln.itemId,
        quantity: ln.quantity
      }));

      if(editOrderId) {
        // update existing
        const resp=await fetch(apiBase+'/api/orders/'+editOrderId,{
          method:'PUT',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({
            seatId: currentOrderSeatId,
            lines: linesToSend
          })
        });
        if(!resp.ok){
          const err=await resp.json();
          alert(err.error||'Error updating order');
        } else {
          alert('Order updated!');
          editOrderId=null;
        }
      } else {
        // create new
        const resp=await fetch(apiBase+'/api/orders',{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({
            seatId: currentOrderSeatId,
            lines: linesToSend
          })
        });
        if(!resp.ok){
          const err=await resp.json();
          alert(err.error||'Error creating order');
        } else {
          alert('Order created successfully!');
        }
      }
      // reset
      currentOrderLines=[];
      currentOrderSeatId=null;
      renderOrderLinesTable();
      document.getElementById('orderSeatSelect').value='';
      await refreshOrders();
    });
    function refreshOrderItemOptions(){
      const sel=document.getElementById('orderItemSelect');
      sel.innerHTML='<option value="">Choose Item</option>';
      itemsData.forEach(it=>{
        const op=document.createElement('option');
        op.value=it.id;
        op.textContent=`${it.name} ($${it.price.toFixed(2)})`;
        sel.appendChild(op);
      });
    }
    function refreshOrderSeatOptions(){
      const seatSel=document.getElementById('orderSeatSelect');
      seatSel.innerHTML='<option value="">No seat assigned</option>';
      seatsData.forEach(s=>{
        const op=document.createElement('option');
        op.value=s.id;
        op.textContent=`${s.name}${s.isReserved?' (Reserved)':''}`;
        seatSel.appendChild(op);
      });
    }

    /***************************************************/
    /*** 10) DOMContentLoaded: Load All Data **********/
    /***************************************************/
    window.addEventListener('DOMContentLoaded', async()=>{
      showSection('dashboard');  // default

      // Load data from server
      await refreshCategories();
      await refreshItems();
      await refreshSeats();
      await refreshCashiers();
      await refreshBookings();
      await refreshOrders();

      // Fill item & seat options for the Orders form
      refreshOrderItemOptions();
      refreshOrderSeatOptions();

      // Update dashboard counters
      updateDashboard();
    });
  </script>
</body>
</html>
